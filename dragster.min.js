/*!
 *  AngularJS HTML5 Drag & Drop module
 *
 *  @author     Dániel Sebestyén <dannystyleart@gmail.com>
 *  @url        http://github.com/dannystyleart/ngDragster.git
 *  @version    1.0.0
 *  @license    MIT
 *
 */
!function(){"use strict";var a={dragOver:"dragster--hover",droppable:"dragster--dropzone"},b={start:"ngDragster.dragging:start",end:"ngDragster.dragging:end"},c=function(a){var b=[];return angular.forEach(a.split(","),function(a){b.push(a.trim())}),b},d=function(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1},e=["$parse","$rootScope",function(a,d){return{restrict:"AC",link:function(a,e,f){var g={dragData:angular.isDefined(f.dragData)?a.$eval(f.dragData):void 0,dragGroup:angular.isDefined(f.dragGroup)?c(f.dragGroup):void 0},h=function(a){d.$broadcast(b.start,g),a.dataTransfer.setData("text",JSON.stringify(g))},i=function(a){d.$broadcast(b.end,g)};e.attr("draggable",!0),e.bind("dragstart",h),e.bind("dragend",i)}}}],f=["$parse","$rootScope",function(e,f){return{restrict:"AC",link:function(g,h,i){var j=angular.isDefined(i.dropHandler)?e(i.dropHandler):angular.noop,k=angular.isDefined(i.dropGroup)?c(i.dropGroup):void 0;g.$on(b.start,function(b,c){h.addClass(a.droppable)}),g.$on(b.end,function(b){h.removeClass(a.droppable)});var l=function(b){b.preventDefault(),h.addClass(a.dragOver)},m=function(a){},n=function(b){h.removeClass(a.dragOver)},o=function(c){c.preventDefault(),c.stopPropagation(),h.removeClass(a.dragOver),h.removeClass(a.droppable),f.$broadcast(b.end);var e=JSON.parse(c.dataTransfer.getData("text"));return angular.isDefined(k)&&e.dragGroup&&!d(k,e.dragGroup)?!1:void j(g,{drag:e})};h.bind("dragover",l),h.bind("dragenter",m),h.bind("dragleave",n),h.bind("drop",o)}}}];angular.module("dannystyleart.angular-dragster",[]).directive("dragsterDrag",e).directive("dragsterDropzone",f)}();